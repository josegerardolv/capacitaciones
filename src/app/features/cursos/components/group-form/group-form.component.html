<div *ngIf="isOpen"
    class="institutional-modal-overlay fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-opacity animate-fade-in"
    (click)="onOverlayClick($event)">

    <!-- Modal Container -->
    <div class="bg-white rounded-lg shadow-xl w-full max-w-5xl mx-4 overflow-hidden transform transition-all animate-modal-content"
        role="dialog" aria-modal="true">

        <!-- Header Personalizado (Color Vino) -->
        <div class="bg-[#591223] px-6 py-4 flex justify-between items-center">
            <h3 class="text-white text-xl font-bold font-montserrat">
                {{ group ? 'Editar Grupo' : 'Registrar Grupo' }}
            </h3>
            <button (click)="closeModal()" class="text-white hover:text-gray-200 transition-colors focus:outline-none">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>

        <!-- Body -->
        <div class="p-8">
            <form [formGroup]="groupForm" class="grid grid-cols-1 md:grid-cols-3 gap-6">

                <!-- Nombre del grupo -->
                <div class="col-span-1">
                    <app-input-enhanced controlName="name" [control]="getControl('name')" label="Nombre del grupo"
                        placeholder="Ingresa el nombre del grupo" [required]="true"
                        helperText="Ingresa el nombre del grupo" helperPosition="bottom">
                    </app-input-enhanced>
                </div>

                <!-- Duración -->
                <div class="col-span-1">
                    <app-input-enhanced controlName="duration" [control]="getControl('duration')"
                        label="Duración del grupo" placeholder="Ingresa la duración del curso" [required]="true"
                        helperText="Ingresa la duración del curso" helperPosition="bottom">
                    </app-input-enhanced>
                </div>

                <!-- Ubicación -->
                <div class="col-span-1">
                    <app-input-enhanced controlName="location" [control]="getControl('location')" label="Ubicación"
                        placeholder="Ingresa la ubicación" helperText="Ingresa la ubicación" helperPosition="bottom">
                    </app-input-enhanced>
                </div>

                <!-- Fecha y hora -->
                <div class="col-span-1">
                    <app-input-enhanced controlName="dateTime" [control]="getControl('dateTime')"
                        label="Fecha y hora del grupo" type="datetime-local" [required]="true"
                        helperText="Ingresa fecha y hora del grupo" helperPosition="bottom">
                    </app-input-enhanced>
                </div>

                <!-- Cantidad máxima -->
                <div class="col-span-1">
                    <app-input-enhanced controlName="quantity" [control]="getControl('quantity')"
                        label="Cantidad máxima de conductores" type="number" [required]="true" [min]="1"
                        helperText="Ingresa la cantidad máxima de conductores" helperPosition="bottom">
                    </app-input-enhanced>
                </div>

                <!-- Límite autoregistro -->
                <div class="col-span-1">
                    <app-input-enhanced controlName="autoRegisterLimit" [control]="getControl('autoRegisterLimit')"
                        label="Límite de auto-regirstro" type="number" [required]="true" [min]="1"
                        helperText="Ingresa la cantidad de días para terminar el registro" helperPosition="bottom">
                    </app-input-enhanced>
                </div>

            </form>

            <div class="mt-8 border-t border-gray-100 pt-6 flex justify-end">
                <app-institutional-button [config]="{
                        variant: 'primary',
                        loading: isLoading,
                        disabled: isLoading,
                        customClass: '!bg-[#8B1538]'
                    }" (buttonClick)="save()">
                    Guardar
                </app-institutional-button>
            </div>
        </div>

    </div>
</div>
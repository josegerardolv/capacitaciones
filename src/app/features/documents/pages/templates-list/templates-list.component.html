<div class="p-6 bg-gray-50 min-h-screen">
    <div class="bg-white rounded-3xl shadow-sm border border-gray-100 p-8 min-h-[600px] relative">

        <!-- Header -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold text-gray-800">Templates de Constancias</h2>
            <p class="text-gray-600 mt-2">Diseña, edita y gestiona layouts reutilizables para certificados</p>
        </div>

        <!-- Toolbar -->
        <div class="flex justify-between mb-6">
            <div class="flex space-x-3">
                <button (click)="goToCertificates()"
                    class="px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                    Certificados
                </button>
                <button (click)="goToTarjetones()"
                    class="px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                    Tarjetones
                </button>
            </div>
            <button (click)="createNewTemplate()"
                class="bg-[#8B1538] hover:bg-[#6B1028] text-white px-6 py-2.5 rounded-lg flex items-center font-medium transition-colors shadow-sm">
                <app-universal-icon name="plus-lg" type="bootstrap" [size]="18" class="mr-2"></app-universal-icon>
                Crear Template
            </button>
        </div>

        <!-- Institutional Table -->
        <app-institutional-table [data]="templates" [columns]="tableColumns" [config]="tableConfig">
        </app-institutional-table>

        <!-- Pagination -->
        <app-table-pagination [config]="paginationConfig" (pageChange)="onPageChange($event)">
        </app-table-pagination>

    </div>
</div>

<!-- Template para Categoría -->
<ng-template #categoryTemplate let-item>
    <span *ngIf="item.category" 
        class="px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
        {{ item.category }}
    </span>
    <span *ngIf="!item.category" class="text-gray-400 text-sm">Sin categoría</span>
</ng-template>

<!-- Template para Acciones -->
<ng-template #actionsTemplate let-item>
    <div class="flex items-center justify-center space-x-2">
        <button
            class="w-8 h-8 rounded-full bg-green-100 text-green-800 hover:bg-green-200 flex items-center justify-center transition-colors"
            [appTooltip]="'Vista previa'" tooltipPosition="top" (click)="previewTemplate(item)">
            <span class="material-symbols-outlined text-sm">visibility</span>
        </button>
        <button
            class="w-8 h-8 rounded-full bg-amber-100 text-amber-800 hover:bg-amber-200 flex items-center justify-center transition-colors"
            [appTooltip]="'Editar diseño'" tooltipPosition="top" (click)="editTemplate(item)">
            <span class="material-symbols-outlined text-sm">edit</span>
        </button>
        <button
            class="w-8 h-8 rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200 flex items-center justify-center transition-colors"
            [appTooltip]="'Duplicar'" tooltipPosition="top" (click)="duplicateTemplate(item)">
            <span class="material-symbols-outlined text-sm">content_copy</span>
        </button>
        <button
            class="w-8 h-8 rounded-full bg-red-100 text-red-800 hover:bg-red-200 flex items-center justify-center transition-colors"
            [appTooltip]="'Eliminar'" tooltipPosition="top" (click)="deleteTemplate(item)">
            <span class="material-symbols-outlined text-sm">delete</span>
        </button>
    </div>
</ng-template>

<!-- Modales Genéricos -->
<app-confirmation-modal [isOpen]="isConfirmOpen" [config]="confirmConfig" (confirm)="onConfirmYes()"
    (cancel)="isConfirmOpen = false" (modalClose)="isConfirmOpen = false">
</app-confirmation-modal>

<app-alert-modal [isOpen]="isAlertOpen" [config]="alertConfig" (actionClick)="isAlertOpen = false"
    (modalClose)="isAlertOpen = false">
</app-alert-modal>
